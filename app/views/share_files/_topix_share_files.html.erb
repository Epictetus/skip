<% title ||= _('Share Files') %>
<% share_files ||= [] -%>
<% show_owner_link ||= false -%>

<div class="topix_share_files_wrapper">
  <h2 class="title"><%= icon_tag('asterisk_orange') %><%= h title %></h2>
  <% unless share_files.empty? -%>
    <table class="topix_share_files">
      <col class="col25" />
      <% if show_owner_link -%>
        <col class="col125" />
        <col class="col25" />
      <% end -%>
      <col />
      <col class="col75" />
      <tbody>
        <% share_files.each do |share_file| -%>
          <tr>
            <td class="publication_state"><%= get_publication_type_icon(share_file) %></td>
            <% if show_owner_link -%>
            <td class="owner"><span class="nowrap">
              <%= owner_link_to(share_file.owner) %>
            </span></td>
            <td></td>
            <% end -%>
            <td class="entry_outline">
              <%= file_link_to(share_file, { :truncate => 40 }) %>
              <%= user_link_to(share_file.user, :with_prefix => true) if share_file.owner_is_group? %>
              <span class="tags"><%= share_file_search_links_tag share_file.category, :max => 3 %></span>
              <span class="small_text" style="margin-left:10px"><%= h share_file.description %></span>
              <span class="infos">
                <%= _('Downloads: %s') % content_tag('span', h(share_file.total_count), :id => "download_count_#{share_file.id}") %>
                <%= _('File size: %s') % share_file.file_size_with_unit %>
              </span>
            </td>
            <td class="date"><%= h share_file.date.strftime(_("%B %d %Y")) %></td>
          </tr>
        <% end -%>
      </tbody>
    </table>
  <% end %>
</div>
