<div class="action_buttons ui-corner-all">
  <ul class="no_style">
    <% unless current_participation -%>
      <li><%= link_to(content_tag('span', _('Join this group')), [current_tenant, current_target_group, current_user, :group_participations], {:class => "rounded", :method => :post}) -%></li>
      <% if notice = current_user.notices.find_by_target_id_and_target_type(current_target_group.id, current_target_group.class.name) -%>
        <li><%= link_to(content_tag('span', _('Stop a notification')), [current_tenant, current_target_group, notice], {:class => "rounded", :method => :delete, :confirm => _('Are you sure?')}) %></li>
      <% else -%>
        <li><%= link_to(content_tag('span', _('Notify new posts')), [current_tenant, current_target_group, :notices], {:class => "rounded", :method => :post}) %></li>
      <% end -%>
    <% else -%>
      <% if current_participation.waiting? -%>
        <%= participation_state current_target_group, current_user.id %>
      <% else -%>
        <% if current_participation && !current_participation.waiting? -%>
          <%= render :partial => 'board_entries/new_entry_links', :locals => {:wrap_by_ul => true} %>
        <% end -%>
        <li><%= link_to(content_tag('span', _('Upload a file')), new_polymorphic_path([current_tenant, current_target_group, :share_file]), :title => _('Upload a file'), :class => 'rounded') %></li>
        <% unless current_participation.owned? -%>
          <li><%= link_to(content_tag('span', _('Leave the group')), [current_tenant, current_target_group, current_participation], :confirm => _('Are you sure to leave the group?'), :method => :delete, :class => "rounded") %></li>
        <% end -%>
      <% end -%>
    <% end -%>
  </ul>
</div>
